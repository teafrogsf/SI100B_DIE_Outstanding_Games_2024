# README

### Developers

> 陈籽安 2024533010
>
> 戚桐瑜 2024591032
>
> 何宗原 2024533041

### Gameplay

1. 本游戏为对游戏《空洞骑士》的致敬。基本的玩法为横板跳跃跑酷 + 卡牌战斗，带有少量随机要素。
2. 地图总共有4章，标号为 `map0` 到 `map3` ，`map0` 为肉鸽地图，每次随机重新生成，用于刷钱刷怪。
3. 最终 boss 为辐光，击败其则游戏结束。

#### 游戏高光

1. **纯手工制作**的跑酷地图，**具有一定难度**的同时，在某些地方提供了多种解法。
2. 优秀的美术表现与统一的美术风格：不论是在战斗中还是地图中，都有**精美的特效与演出**和**动听的、不重复的 bgm**，营造了优秀的氛围感。
3. 精美的战斗体验，耐玩的战斗机制：本作的卡牌战斗机制具有良好的可玩性与深度，但是又不难上手，具有调节难度功能（在 npc 柯尼法 (Cornifer) 处对话以改变难度，下面会提及）。在简单模式下，随意操作也能击败一些怪物。
4. 与 npc 交流的对话框带有保留历史对话记录、自动换行、上下翻页功能（按键盘上的“上下”即可）。

####  操作

菜单界面、商店界面与战斗界面采用鼠标操作，直接点击即可。

其他部分采用键盘操作，详细情况见下。

#### 地图相关

1. `A` 和 `D` 控制左右移动，`Space` 跳跃，`L` 冲刺，按 `E` 以与 **所有可交互物品或人物** 进行交互。
2. 在游玩跑酷地图时，**请确保用性能良好的插电游戏本/台式机进行游玩**，否则会因为性能问题，影响跳跃高度。
3. 遇到跑酷上的困难，请尽量先联系制作者，所有跑酷内容均为反复测试可以通过，且部分内容存在多种解法，有时候**最直接的解法不一定是最简单的**。（如果实在过不去，尝试着注释掉 `MapPage.py` 里调用 `reborn` 函数的语句，但这可能带来其他程序上的问题）
4. 冲刺中不受重力加速度的作用，并且不可以中途改变方向。在空中最多只能冲刺一次，落地后重置冲刺次数。
5. 地图中含有一次性打开的宝箱，按 `E` 打开可以获得吉欧（钱币）。
6. 关于地图之间的传送：朝向向左的长椅是回到上一地图（$map_{i-1}$），向右的长椅是进入下一地图。
7. 地图中存在怪物，按 `E` 进入战斗。
8. 地图中有柯尼法 (Cornifer) 和 先知 (Seer) 两位 npc，都可以按 `E` 进行对话。前者用于调整游戏难度（在对话框输入 easy/medium/hard 即可）以及购买（按 `B` 打开商店界面），后者用于聊天（告知小骑士 boss）就在前方。

#### 战斗规则

**省流**规则：

1. 你有一堆门，门有非且或与非或非异或同或七种，门还分 01 （阴阳）两种属性，门还有数值，对面有一个 01 属性串，每个 0/1 也带一个数值。
2. 你可以用门去修改对面的 01 串，也可以抽卡。这两个都可以任意进行，但是消耗精力，每回合回复一定量精力。
3. 回合结束时把你和对面属性 0 的数值加起来拼点，1 的也是。分别计算伤害，大的对小的造成差值的伤害。

---

![](https://pic1.imgdb.cn/item/67821599d0e0a243d4f355b3.png)

在屏幕左下角的，是我方的卡；在屏幕右下角则是敌方的卡。

鼠标移动到卡上，可以查看这张卡的信息。

+ 名称：一般的卡都有很帅的名称，除非你没那么帅。
+ 门类：共七种，边框颜色为 $\text{{\color{red}红}、{\color{orange}橙}、{\color{gold}黄}、{\color{green}绿}、{\color{lightblue}蓝}、{\color{blue}靛}、{\color{purple}紫}}$ 的技能，门类分别为 $\text{{\color{red}not}、{\color{orange}and}、{\color{gold}or}、{\color{green}nand}、{\color{lightblue}nor}、{\color{blue}xor}、{\color{purple}xnor}}$。此外还有一种 $\text{{\color{brown}棕}}$ 色边框的卡，没有门类，也就是 $\text{{\color{brown}无类}}$。
+ 类型：共两种，阴（0）和阳（1）。
+ 等级：卡牌的等级，这是最重要也是最直接的数值。只要这个高，无视以上任何一条直接碾过去就行了。

每个回合，你都可以选择自己的卡（单击选中），然后选择对方的一或两张卡，进行一次操作。

操作的方式是：

1. 若你选择的是 $\text{{\color{red}非门}}$，则你只能选中对方的一张卡，将其类型反转。
2. 否则，你选中对方的两张卡，将其合并为一张卡，你的卡的门类决定了得到的卡的类型，这与电路上的与门、或门……等等规则相同。得到的卡的等级是对方两张卡等级的较大值。

无论你使用何种门，每次使用消耗 1 精力。

**Draw 按钮用来消耗 1 精力抽卡。**

**Undo 按钮撤销你本回合所有操作。**

**顶上那个亮亮的按钮摁一下结束你的回合（也可以拍空格）。**然后开始计算伤害。

对于阳和阴，分别计算伤害，若你手上的阳卡等级和为 $X$，对面的等级和为 $Y$，则高的对低的造成 $|X-Y|$ 点伤害。阴属性同理。

当我方生命值归零时，失败。

当我方生命值未归零且所有敌人生命值归零，胜利。

### 贡献

1. 陈籽安

- 完成了战斗系统，包括动画、机制、UI。
- 完成了卡牌系统，包括升级。
- 实现了战斗中**精美**的动画设计。
- 实现了不同难度下的细节。
- 实现了小怪的特殊机制
- 实现了 boss 特殊机制
- 实现了 boss 站开场动画

2. 戚桐瑜

- 搭建了 `GameManager.py` 等初步框架，并且实现了初步的菜单功能。
- 添加了 `settings` 内的调节音量功能。
- 修改了移动板块的部分设置，将地图、移动部分和主函数关联。
- 修改了人物移动模型，添加了冲刺功能。
- 添加了 npc，利用 AI 实现了 `ChatBox` 。
- 手动构造了跑酷地图 `map1` 和 `map2`，完成了地图切换功能。
- 实现了与 AI 对话调节难度。
- 添加了商店。
- 完成了所有的 `bgm` 与切换功能。
- 完成了代码的整合。

3. 何宗原

- 完成了最初版地图和人物移动（包括跳跃和碰撞检测）
- 完成了镜头跟随人物。
- 编写了生成随机地图 `Map0` 的代码。
- 完成陷阱相关功能（死亡检测，掉出地图或碰到陷阱自动返回出生点）
- 进行了游戏测试，修复了地图相关的一些 bug。